<div class="top">
	<div class="controls">
		<button class="control-btn" (click)="reset()">
			Reset
			<span class="material-symbols-outlined">format_color_reset</span>
		</button>

		<button class="control-btn" (click)="rotate()">
			Rotate
			<span class="material-symbols-outlined">rotate_90_degrees_cw</span>
		</button>

		<button class="control-btn" (click)="borders()">
			Borders
			<span class="material-symbols-outlined">pageless</span>
		</button>

		<p class="label-top">Color functions for gradient color stops</p>

		<form [formGroup]="form" class="form">
			<label for="startColor">
				Start color:
				<input type="color" formControlName="startColor" id="startColor" value="#ffffff" />
			</label>

			<label for="endColor">
				End color:
				<input type="color" formControlName="endColor" id="endColor" value="#0000ff" />
			</label>
		</form>
	</div>

	<p class="label-left">Interpolation color spaces for gradient mid-tones</p>

	<div
		#table
		class="table"
		[style.gridTemplateColumns]="'min-content repeat(' + (columnCount() - 1) + ', 1fr)'"
		[style.gridTemplateRows]="'min-content repeat(' + (rowCount() - 1) + ', 1fr)'"
	>
		<div></div>

		@for (space of constants.allColorSpaces; track $index) {
			<button
				class="color-stop-btn"
				[attr.data-color-stop-space]="'data-color-stop-space-' + space"
				(click)="removeColorStop(space)"
			>
				{{ getColorFunctionLabel(space) }}
			</button>
		}

		@for (interpolationSpace of constants.allInterpolationSpaces; track $index) {
			<button
				class="interpolation-space-btn"
				[attr.data-interpolation-space]="'data-interpolation-space-' + interpolationSpace"
				(click)="removeColorInterpolationSpace(interpolationSpace)"
			>
				{{ interpolationSpace }}
			</button>

			@for (space of constants.allColorSpaces; track $index) {
				<div
					class="gradient"
					[attr.data-color-stop-space]="'data-color-stop-space-' + space"
					[attr.data-interpolation-space]="'data-interpolation-space-' + interpolationSpace"
					[style.background]="getGradient(interpolationSpace, space)"
					[style.border]="showBorders ? 'solid black' : null"
					[style.border-width]="showBorders ? '0 1px 1px 0' : null"
				></div>
			}
		}
	</div>
</div>

<p class="note">
	All polar color spaces display "shorter hue" as hue interpolation method, which is the default CSS
	value. Other 3 values are not listed as they have specific use-cases and are probably not what you
	need. For more info, visit
	<a
		href="https://developer.mozilla.org/en-US/docs/Web/CSS/hue-interpolation-method"
		target="_blank"
	>
		this link
	</a>
	.
</p>

<div class="bottom">
	<h2 class="title">TL;DR</h2>

	<p class="text">
		For consistent results across all hues, brightness levels, and saturations, use oklch as the
		interpolation color space and employ the CSS color(xyz-d65 …) function for specifying colors.
	</p>

	<p class="code-box">
		background: linear-gradient(
		<span class="direction">&lt;direction&gt;</span>
		in
		<span class="interpolation-space">&lt;interpolation-space&gt;</span>
		,
		<span class="color-stop">&lt;color-stop-1&gt;</span>
		,
		<span class="color-stop">&lt;color-stop-2&gt;</span>
		);

		<br />

		background: linear-gradient(
		<span class="direction">to right</span>
		in
		<span class="interpolation-space">oklch</span>
		,
		<span class="color-stop">color(xyz-d65 0.95 1 1.09)</span>
		,
		<span class="color-stop">color(xyz-d65 0.18 0.072 0.951)</span>
		);
	</p>

	<h2 class="title">In detail</h2>

	<ol class="list-lvl-1">
		<li class="subtitle">Default values</li>
		<ol class="list-lvl-2">
			<li>
				Colors expressed in hexadecimal notation belong to the RGB color space; the HEX format is
				merely an alternative syntax for representing the same RGB values.
			</li>
			<li>
				If no interpolation space is specified, gradients whose color stops are defined exclusively
				with the rgb(), hsl(), or hwb() functions default to the sRGB interpolation space. For all
				other cases, the gradient defaults to the OKLab interpolation space.
			</li>
		</ol>

		<li class="subtitle">Recomendations</li>
		<ol class="list-lvl-2">
			<li>
				As outlined in the TL;DR, the recommended workflow is to use oklch as the interpolation
				color space and color(xyz-d65 …) for defining color stops. This combination delivers the
				most accurate results across a wide range of hues, brightness levels, and saturations.
				Alternatively, you can employ oklab as the interpolation space. While it yields slightly
				different tonal characteristics, it may better suit specific palettes or design goals. In
				either case, keep the same color-stop function (color(xyz-d65 …)) for best results.
			</li>
			<li>
				Using relative colors with the color() function's from keyword is not recommended because
				the conversion is imperfect.
			</li>
			<li>
				Using the hsl() or hwb() color functions in CSS is discouraged. The RGB color space provides
				roughly 16.7 million distinct colors, whereas HSL and HWB each cover only about 3.6
				million—a mere ≈ 21 % of the RGB gamut. Consequently, browsers must convert HSL/HWB values
				to RGB for rendering, which not only limits the available color palette but can also
				introduce rounding errors during the conversion process.
			</li>
			<li>
				Using HSL or HWB as the interpolation color space is strongly discouraged. These spaces
				frequently produce inconsistent mid-tone results when combined with any color function, and
				they often introduce unintended colors into gradients.
			</li>
		</ol>

		<li class="subtitle">Bugs</li>
		<ol class="list-lvl-2">
			<li>
				As outlined in the TL;DR, the recommended approach is to use OKLCH as the interpolation
				color space. While this generally yields superior results, blue mid-tones can acquire a
				subtle teal hue. The only practical alternative is OKLAB , which tends to introduce a faint
				purple tint in blue mid-tones. Additionally, rectangular color spaces like OKLAB interpolate
				colors along a straight line, whereas polar color spaces like OKLCH interpolate in a
				circular manner around the hue wheel. Both approaches are viable; choose the option that
				best aligns with your visual requirements.
				<div class="blue-bug">
					<div class="oklch">oklch</div>
					<div class="oklab">oklab</div>
				</div>
			</li>
			<li>ADD lightpink-to-blue BUG EXAMPLE IN BUGS SECTION</li>
			<li>ADD RELATIVE-BUG EXAMPLE IN BUGS SECTION</li>
		</ol>
	</ol>
</div>
